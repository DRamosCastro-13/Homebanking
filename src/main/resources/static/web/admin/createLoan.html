<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../assets/asstetsImg/Screenshot_2023-12-09_at_5.18.16_PM-removebg-preview.png" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" type="text/css" href="../assets/assetsStyles/loanApplication.css">
    <title>Loan Application | ANB</title>
</head>
<body>
    <header class="flex flex-col shadow-xl justify-around items-center lg:flex-row lg:justify-between z-40 h-[10rem] lg:h-[4rem] bg-[#004481] lg:fixed lg:w-full lg:top-0" id="header">
        <div class="lg:flex items-center ml-8 hidden gap-3 w-[14rem] justify-around">
            <ul class="nav-menu">
                <li class="nav-item border-t-2 border-t-[#A5D6FF] group hover:bg-blue-900">
                    <a href="../../index.html" class="nav-link w-full group-hover:text-white">Home</a>
                </li>
                <li class="nav-item group hover:bg-blue-900">
                    <a href="./managerOverview.html" class="nav-link group-hover:text-white">Manager Overview</a>
                </li> 
                <li class="nav-item group hover:bg-blue-900">
                    <a href="#" class="nav-link group-hover:text-white">Help</a>
                </li>
                <li class="nav-item h-[100dvh]">
                    <a href="#" class="nav-link"></a>
                </li>
            </ul>
            <div>
                <div class="hamburger" @click="showMenu = !showMenu">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </div>
            </div>
            <a href="../../index.html"><img class="bg-cover justify-start pt-5 lg:pt-0 w-[10rem] sm:w-[15rem] lg:w-[10rem] lg:ml-5" src="../assets/asstetsImg/Logo with bg.png" alt="logo"></a>
        </div>
        <a href="../../index.html"><img class="bg-cover justify-start pt-5 lg:hidden w-[10rem] sm:w-[15rem] lg:w-[10rem] lg:ml-5" src="../assets/asstetsImg/Logo with bg.png" alt="logo"></a>
        <div class="flex flex-wrap items-center lg:w-[14rem] lg:justify-around">
            <a href="#" class="hidden lg:flex">
                <svg fill="#ffffff" width="32px" height="32px" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff" stroke-width="16.384">
    
                    <g id="SVGRepo_bgCarrier" stroke-width="0"/>
                    
                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"/>
                    
                    <g id="SVGRepo_iconCarrier">
                    
                    <path d="M512 277.333c-58.974 0-106.667 47.693-106.667 106.667 0 11.782-9.551 21.333-21.333 21.333s-21.333-9.551-21.333-21.333c0-82.538 66.795-149.333 149.333-149.333S661.333 301.463 661.333 384c0 75.294-55.586 137.489-128 147.823V640c0 11.78-9.553 21.333-21.333 21.333S490.667 651.78 490.667 640V512c0-11.78 9.553-21.333 21.333-21.333 58.974 0 106.667-47.693 106.667-106.667S570.974 277.333 512 277.333zm0 506.454c23.565 0 42.667-19.102 42.667-42.667S535.565 698.453 512 698.453s-42.667 19.102-42.667 42.667 19.102 42.667 42.667 42.667z"/>
                    
                    <path d="M512 85.333C276.358 85.333 85.333 276.358 85.333 512c0 235.639 191.025 426.667 426.667 426.667 235.639 0 426.667-191.027 426.667-426.667C938.667 276.358 747.64 85.333 512 85.333zM128 512c0-212.077 171.923-384 384-384 212.079 0 384 171.923 384 384 0 212.079-171.921 384-384 384-212.077 0-384-171.921-384-384z"/>
                    
                    </g>
                    
                </svg>
            </a>
            <a href="../../index.html" class="group flex gap-2 items-center">
                <svg width="38px" height="38px" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" fill="#687482" stroke="#687482">
    
                    <g id="SVGRepo_bgCarrier" stroke-width="0"/>
                    
                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"/>
                    
                    <g id="SVGRepo_iconCarrier">
                    
                    <title>ionicons-v5-o</title>
                    
                    <path d="M304,336v40a40,40,0,0,1-40,40H104a40,40,0,0,1-40-40V136a40,40,0,0,1,40-40H256c22.09,0,48,17.91,48,40v40" style="fill:none;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px"/>
                    
                    <polyline points="368 336 448 256 368 176" style="fill:none;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px"/>
                    
                    <line x1="176" y1="256" x2="432" y2="256" style="fill:none;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px"/>
                    
                    </g>
                    
                    </svg>
                <p class=" lg:text-xl font-semibold text-gray-300 group-hover:text-white lg:mr-8" @click="logOut()">Log Out</p>
            </a>
        </div>
    </header>
    <div id="app">
        <main class="flex flex-col items-center gap-3 flex-wrap min-h-screen lg:min-h-[90dvh] bg-[#E4F1FF]">
           
            <div class="flex flex-col items-start gap-3 w-11/12 sm:7/12 my-2 lg:2/12 lg:pt-24"> 
                <div class="flex justify-start w-3/12 lg:ml-7 xl:ml-20">
                    <a href="./managerOverview.html" class="text-[#004481] mb-2 active:text-[#004481] text-md lg:text-lg justify-start border-solid border-b-2 border-[#004481]"> &lt; Return</a>
                </div>
                <h1 class="font-bold text-3xl text-[#004481] lg:mt-7 w-full text-center lg:text-5xl">Create New Loan</h1>
            </div>
           
            <p class="w-10/12 md:text-xl lg:mt-5 md:text-justify text-center">The following is the list of existing loans. Have in mind that the New Loan cannot have the same name of an existing loan. Please fill out the information below.</p>
            
            <div class="flex flex-col w-full md:w-10/12 flex-wrap items-center lg:flex-row  justify-around lg:gap-10 lg:mt-5">
               
                <template v-for="availableLoan in availableLoans">
                   
                    <div class="flex flex-col items-center p-2 w-9/12 lg:w-[21rem] lg:py-4 my-3 lg:-mt-1 gap-3 bg-gradient-to-l from-orange-200 to-rose-200 shadow-md shadow-slate-400 rounded-lg">
                        <h4 class="font-semibold text-2xl text-zinc-950">{{availableLoan.name}}</h4>
                        <p class="text-slate-600 text-center">Maximum Amount: <span class="font-bold text-lg text-slate-900">{{availableLoan.maxAmount.toLocaleString("en-US", {style:"currency", currency:"USD"})}}</span></p>
                        <p class="text-slate-700 text-center">Interest Rate: <span class="font-bold text-lg text-slate-900">{{availableLoan.interest * 100}}%</span></p>
                        <p class="text-slate-700 text-center"><span class="font-bold text-lg text-slate-900">{{availableLoan.payments}}</span> Monthly Payments</p>
                    </div>
              
                </template>
            
            </div>

            <form @submit.prevent="createLoan()" class="loans-form">
                <label for="name" class="text-lg mb-2 text-zinc-800 font-semibold mt-3">Loan Name</label>
                <input type="text" name="name" placeholder="Loan Name" class="w-full mb-3 bg-blue-300/30 p-1 rounded-md" v-model="name">

                <label for="amount" class="text-lg mb-2 text-zinc-800 font-semibold mt-3">Loan Max Amount <span class="text-gray-500 text-sm">(Minimun Amount: $10,000.00 , Maximum Amount: $1,000,000.00)</span></label>
                <input name="amount" type="number" min="0" pattern="^\$\d{1,3}(,\d{3})*(\.\d+)?$" placeholder="$10,000.00" class="w-full mb-3 bg-blue-300/30 p-1 rounded-md" v-model="amount">

                <label for="payments" class="text-lg mb-2 text-zinc-800 font-semibold mt-3">Loan Payments</label>
                <select name="payments"  class="w-full mb-2 bg-blue-300/30 p-1 rounded-md" v-model="payments" @change="parsePayments(payments)">
                    <option value="" disabled selected>Select Payment Plan</option>
                    <option value="[3, 6, 12]">3, 6, 12</option>
                    <option value="[6, 12, 24]">6, 12, 24</option>
                    <option value="[3, 6, 12, 24]">3, 6, 12, 24</option>
                    <option value="[6, 12, 24, 36]">6, 12, 24, 36</option>
                    <option value="[6, 12, 24, 36, 48]">6, 12, 24, 36, 48</option>
                </select>

                <label for="interest" class="text-lg mb-2 text-zinc-800 font-semibold mt-3">Interest Rate</label>
                <select name="interest"  class="w-full mb-2 bg-blue-300/30 p-1 rounded-md" v-model="interest">
                    <option value="" disabled selected>Select Interest Rate</option>
                    <option value="0.05">5%</option>
                    <option value="0.1">10%</option>
                    <option value="0.15">15%</option>
                    <option value="0.2">20%</option>
                    <option value="0.25">25%</option>
                    <option value="0.3">30%</option>
                </select>
                
                <button type="submit" class="w-8/12 place-self-center lg:w-5/12 px-3 py-2 mb-3 mt-3 bg-[#004481] text-white lg:text-slate-300 rounded-md text-sm shadow-sm lg:hover:text-white lg:hover:bg-[#004481]">Submit Application</button>
                <div v-if="error">
                    <p class="text-red-500 text-center text-md">*{{error}}</p>
                </div>

            </form>
            </div>
        </main>
        <footer>
            <div class="flex flex-col items-center justify-center gap-1 bg-[#004481] h-[4rem] border-t border-slate-700">
                <p class="text-sm text-center md:text-lg text-white">Assurance National Bank © 2023 - All Rights Reserved</p>
                <p class="text-xs text-white">Created By: Daniela Ramos-Castro</p>
            </div>
            
        </footer>
    </div>
    <script src="../assets/assetsScripts/index.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="../admin/createLoan.js"></script>
    <script type="module" src="../assets/assetsStyles/tailwind.config.extension.js"></script>
    <script type="module" src="../assets/assetsStyles/tailwind.config.js"></script>
</body>
</html>